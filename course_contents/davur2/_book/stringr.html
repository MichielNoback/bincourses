<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Processing text with: stringr and regex | Data Analysis and Visualization using R (2)</title>
  <meta name="description" content="This is the ebook accompanying the course Data Analysis and Visualization using R 2 (DAVuR2)." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Processing text with: stringr and regex | Data Analysis and Visualization using R (2)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the ebook accompanying the course Data Analysis and Visualization using R 2 (DAVuR2)." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Processing text with: stringr and regex | Data Analysis and Visualization using R (2)" />
  
  <meta name="twitter:description" content="This is the ebook accompanying the course Data Analysis and Visualization using R 2 (DAVuR2)." />
  

<meta name="author" content="Michiel Noback" />


<meta name="date" content="2020-01-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="date-time.html">
<link rel="next" href="eda.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DAVuR2 gitbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>1</b> The <code>ggplot2</code> package</a><ul>
<li class="chapter" data-level="1.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#keep-the-goal-in-mind"><i class="fa fa-check"></i>Keep the goal in mind</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ggplot2.html"><a href="ggplot2.html#getting-started"><i class="fa fa-check"></i><b>1.2</b> Getting started</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#a-first-plot"><i class="fa fa-check"></i>A first plot</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#adding-a-dimension-using-color"><i class="fa fa-check"></i>Adding a dimension using color</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#inspecting-and-tuning-the-figure"><i class="fa fa-check"></i>Inspecting and tuning the figure</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-and-the-theory-of-graphics"><i class="fa fa-check"></i><b>1.3</b> ggplot2 and the theory of graphics</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#phylosophy-of-ggplot2"><i class="fa fa-check"></i>Phylosophy of ggplot2</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i>The grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ggplot2.html"><a href="ggplot2.html#building-plots-with-ggplot2"><i class="fa fa-check"></i><b>1.4</b> Building plots with ggplot2</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#the-layered-plot-architecture"><i class="fa fa-check"></i>The layered plot architecture</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#tidy-the-data"><i class="fa fa-check"></i>“Tidy” the data</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>1.5</b> Aesthetics</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#colors"><i class="fa fa-check"></i>Colors</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#shapes"><i class="fa fa-check"></i>Shapes</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#lines"><i class="fa fa-check"></i>Lines</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#size"><i class="fa fa-check"></i>Size</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="ggplot2.html"><a href="ggplot2.html#geometries"><i class="fa fa-check"></i><b>1.6</b> Geometries</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#what-are-geometries"><i class="fa fa-check"></i>What are geometries</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#boxplot"><i class="fa fa-check"></i>Boxplot</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#jitter"><i class="fa fa-check"></i>Jitter</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#plot-overlays-boxplot-jitter"><i class="fa fa-check"></i>Plot overlays: boxplot + jitter</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#scatterplot-points"><i class="fa fa-check"></i>Scatterplot: Points</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#line-plots"><i class="fa fa-check"></i>Line plots</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#histograms"><i class="fa fa-check"></i>Histograms</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#violin-plot"><i class="fa fa-check"></i>Violin plot</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#overview-of-the-main-geoms"><i class="fa fa-check"></i>Overview of the main geoms</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="ggplot2.html"><a href="ggplot2.html#inheritance-of-aesthetics"><i class="fa fa-check"></i><b>1.7</b> Inheritance of aesthetics</a></li>
<li class="chapter" data-level="1.8" data-path="ggplot2.html"><a href="ggplot2.html#facetting"><i class="fa fa-check"></i><b>1.8</b> Facetting</a></li>
<li class="chapter" data-level="1.9" data-path="ggplot2.html"><a href="ggplot2.html#experimenting-with-geoms-and-aesthetics"><i class="fa fa-check"></i><b>1.9</b> Experimenting with geoms and aesthetics</a></li>
<li class="chapter" data-level="1.10" data-path="ggplot2.html"><a href="ggplot2.html#final-tweeks"><i class="fa fa-check"></i><b>1.10</b> Final tweeks</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#scales-and-coordinates"><i class="fa fa-check"></i>Scales and Coordinates</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#labels"><i class="fa fa-check"></i>Labels</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i>Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html"><i class="fa fa-check"></i><b>2</b> Developing a custom visualization</a><ul>
<li class="chapter" data-level="2.1" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#an-experimental-ptsd-treatment"><i class="fa fa-check"></i><b>2.1</b> An experimental PTSD treatment</a><ul>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#the-data"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#choose-a-visualization"><i class="fa fa-check"></i>Choose a visualization</a></li>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#tidy-the-data-1"><i class="fa fa-check"></i>Tidy the data</a></li>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#a-first-version"><i class="fa fa-check"></i>A first version</a></li>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#add-mean-and-sd"><i class="fa fa-check"></i>Add mean and SD</a></li>
<li class="chapter" data-level="" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#emphasise-worst-cases"><i class="fa fa-check"></i>Emphasise worst cases</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#last-tweaks-fonts-and-legend"><i class="fa fa-check"></i><b>2.2</b> Last tweaks: fonts and legend</a></li>
<li class="chapter" data-level="2.3" data-path="developing-a-custom-visualization.html"><a href="developing-a-custom-visualization.html#the-code"><i class="fa fa-check"></i><b>2.3</b> The code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>3</b> Package tidyr</a><ul>
<li class="chapter" data-level="3.1" data-path="tidyr.html"><a href="tidyr.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="tidyr.html"><a href="tidyr.html#the-gather-function"><i class="fa fa-check"></i><b>3.2</b> The <code>gather()</code> function</a></li>
<li class="chapter" data-level="3.3" data-path="tidyr.html"><a href="tidyr.html#a-more-complex-problem-two-sets-of-columns"><i class="fa fa-check"></i><b>3.3</b> A more complex problem: two sets of columns</a></li>
<li class="chapter" data-level="3.4" data-path="tidyr.html"><a href="tidyr.html#widening-with-spread-and-pivot_wider"><i class="fa fa-check"></i><b>3.4</b> Widening with <code>spread()</code> and <code>pivot_wider()</code></a></li>
<li class="chapter" data-level="3.5" data-path="tidyr.html"><a href="tidyr.html#separate-columns"><i class="fa fa-check"></i><b>3.5</b> <code>separate()</code> columns</a></li>
<li class="chapter" data-level="3.6" data-path="tidyr.html"><a href="tidyr.html#combine-columns"><i class="fa fa-check"></i><b>3.6</b> combine columns</a></li>
<li class="chapter" data-level="3.7" data-path="tidyr.html"><a href="tidyr.html#drop-rows-with-missing-values-drop_na"><i class="fa fa-check"></i><b>3.7</b> Drop rows with missing values: <code>drop_na()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> Data mangling with package <code>dplyr</code></a><ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#tibbles"><i class="fa fa-check"></i><b>4.1</b> Tibbles</a><ul>
<li class="chapter" data-level="4.1.1" data-path="dplyr.html"><a href="dplyr.html#by-row-constructor"><i class="fa fa-check"></i><b>4.1.1</b> By-row constructor</a></li>
<li class="chapter" data-level="4.1.2" data-path="dplyr.html"><a href="dplyr.html#tibbles-vs-data-frames"><i class="fa fa-check"></i><b>4.1.2</b> Tibbles vs data frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="dplyr.html"><a href="dplyr.html#the-str-equivalent-glimpse"><i class="fa fa-check"></i><b>4.1.3</b> The <code>str()</code> equivalent: <code>glimpse()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#the-chaining-operator"><i class="fa fa-check"></i><b>4.2</b> The chaining operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#selecting"><i class="fa fa-check"></i><b>4.3</b> Selecting</a><ul>
<li class="chapter" data-level="4.3.1" data-path="dplyr.html"><a href="dplyr.html#selecting-rows-by-index-slice"><i class="fa fa-check"></i><b>4.3.1</b> Selecting rows by index: <code>slice()</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="dplyr.html"><a href="dplyr.html#get-unique-cases-with-distinct"><i class="fa fa-check"></i><b>4.3.2</b> Get unique cases with <code>distinct()</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="dplyr.html"><a href="dplyr.html#filter-cases"><i class="fa fa-check"></i><b>4.3.3</b> <code>filter()</code> cases</a></li>
<li class="chapter" data-level="4.3.4" data-path="dplyr.html"><a href="dplyr.html#selecting-variables-select"><i class="fa fa-check"></i><b>4.3.4</b> Selecting variables: <code>select()</code></a></li>
<li class="chapter" data-level="4.3.5" data-path="dplyr.html"><a href="dplyr.html#renaming-variables-rename"><i class="fa fa-check"></i><b>4.3.5</b> Renaming variables: <code>rename()</code></a></li>
<li class="chapter" data-level="4.3.6" data-path="dplyr.html"><a href="dplyr.html#selecting-from-ranked-data"><i class="fa fa-check"></i><b>4.3.6</b> Selecting from ranked data</a></li>
<li class="chapter" data-level="4.3.7" data-path="dplyr.html"><a href="dplyr.html#extract-a-colum-as-vector"><i class="fa fa-check"></i><b>4.3.7</b> Extract a colum as vector</a></li>
<li class="chapter" data-level="4.3.8" data-path="dplyr.html"><a href="dplyr.html#sorting-with-arrange"><i class="fa fa-check"></i><b>4.3.8</b> Sorting with <code>arrange()</code></a></li>
<li class="chapter" data-level="4.3.9" data-path="dplyr.html"><a href="dplyr.html#random-sampling"><i class="fa fa-check"></i><b>4.3.9</b> Random sampling</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dplyr.html"><a href="dplyr.html#adding-and-changing-variables"><i class="fa fa-check"></i><b>4.4</b> Adding and changing variables</a><ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr.html"><a href="dplyr.html#window-functions"><i class="fa fa-check"></i><b>4.4.1</b> Window functions</a></li>
<li class="chapter" data-level="4.4.2" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>4.4.2</b> Add one or more variables: <code>mutate()</code></a></li>
<li class="chapter" data-level="4.4.3" data-path="dplyr.html"><a href="dplyr.html#create-new-variables-based-on-more-columns"><i class="fa fa-check"></i><b>4.4.3</b> Create new variables based on more columns</a></li>
<li class="chapter" data-level="4.4.4" data-path="dplyr.html"><a href="dplyr.html#change-a-variable-recode-and-recode_factor"><i class="fa fa-check"></i><b>4.4.4</b> Change a variable: <code>recode()</code> and <code>recode_factor()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dplyr.html"><a href="dplyr.html#operations-on-groups"><i class="fa fa-check"></i><b>4.5</b> Operations on groups</a><ul>
<li class="chapter" data-level="4.5.1" data-path="dplyr.html"><a href="dplyr.html#group_by-and-ungroup"><i class="fa fa-check"></i><b>4.5.1</b> <code>group_by()</code> and <code>ungroup()</code></a></li>
<li class="chapter" data-level="4.5.2" data-path="dplyr.html"><a href="dplyr.html#group_split-and-group_keys"><i class="fa fa-check"></i><b>4.5.2</b> <code>group_split()</code> and <code>group_keys()</code></a></li>
<li class="chapter" data-level="4.5.3" data-path="dplyr.html"><a href="dplyr.html#apply-a-function-to-each-group"><i class="fa fa-check"></i><b>4.5.3</b> Apply a function to each group</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="dplyr.html"><a href="dplyr.html#summarizing-and-counting"><i class="fa fa-check"></i><b>4.6</b> Summarizing and counting</a></li>
<li class="chapter" data-level="4.7" data-path="dplyr.html"><a href="dplyr.html#combining-data"><i class="fa fa-check"></i><b>4.7</b> Combining data</a><ul>
<li class="chapter" data-level="4.7.1" data-path="dplyr.html"><a href="dplyr.html#merging"><i class="fa fa-check"></i><b>4.7.1</b> Merging</a></li>
<li class="chapter" data-level="4.7.2" data-path="dplyr.html"><a href="dplyr.html#adding-rows-and-columns"><i class="fa fa-check"></i><b>4.7.2</b> Adding rows and columns</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="date-time.html"><a href="date-time.html"><i class="fa fa-check"></i><b>5</b> Working with date-time data: <code>lubridate</code></a><ul>
<li class="chapter" data-level="5.1" data-path="date-time.html"><a href="date-time.html#current-time"><i class="fa fa-check"></i><b>5.1</b> Current time</a></li>
<li class="chapter" data-level="5.2" data-path="date-time.html"><a href="date-time.html#getting-elements-from-date-time-objects"><i class="fa fa-check"></i><b>5.2</b> Getting elements from date-time objects</a></li>
<li class="chapter" data-level="5.3" data-path="date-time.html"><a href="date-time.html#calculations-with-date-time"><i class="fa fa-check"></i><b>5.3</b> Calculations with date-time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stringr.html"><a href="stringr.html"><i class="fa fa-check"></i><b>6</b> Processing text with: <code>stringr</code> and regex</a><ul>
<li class="chapter" data-level="6.1" data-path="stringr.html"><a href="stringr.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="6.1.1" data-path="stringr.html"><a href="stringr.html#a-few-remarks-on-locale"><i class="fa fa-check"></i><b>6.1.1</b> A few remarks on “locale”</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="stringr.html"><a href="stringr.html#review-of-regular-expressions"><i class="fa fa-check"></i><b>6.2</b> Review of regular expressions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="stringr.html"><a href="stringr.html#regex-syntax-elements"><i class="fa fa-check"></i><b>6.2.1</b> Regex syntax elements</a></li>
<li class="chapter" data-level="6.2.2" data-path="stringr.html"><a href="stringr.html#character-classes-and-negation"><i class="fa fa-check"></i><b>6.2.2</b> Character classes and negation</a></li>
<li class="chapter" data-level="6.2.3" data-path="stringr.html"><a href="stringr.html#quantifiers"><i class="fa fa-check"></i><b>6.2.3</b> Quantifiers</a></li>
<li class="chapter" data-level="6.2.4" data-path="stringr.html"><a href="stringr.html#anchoring"><i class="fa fa-check"></i><b>6.2.4</b> Anchoring</a></li>
<li class="chapter" data-level="6.2.5" data-path="stringr.html"><a href="stringr.html#alternatives"><i class="fa fa-check"></i><b>6.2.5</b> Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="stringr.html"><a href="stringr.html#the-stringr-essentials"><i class="fa fa-check"></i><b>6.3</b> The <code>stringr</code> essentials</a><ul>
<li class="chapter" data-level="6.3.1" data-path="stringr.html"><a href="stringr.html#case-conversion"><i class="fa fa-check"></i><b>6.3.1</b> Case conversion</a></li>
<li class="chapter" data-level="6.3.2" data-path="stringr.html"><a href="stringr.html#split-join-and-substring"><i class="fa fa-check"></i><b>6.3.2</b> Split, join and substring</a></li>
<li class="chapter" data-level="6.3.3" data-path="stringr.html"><a href="stringr.html#matching"><i class="fa fa-check"></i><b>6.3.3</b> Matching</a></li>
<li class="chapter" data-level="6.3.4" data-path="stringr.html"><a href="stringr.html#extracting-and-replacing"><i class="fa fa-check"></i><b>6.3.4</b> Extracting and replacing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="eda.html"><a href="eda.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="eda.html"><a href="eda.html#getting-to-know-the-dataset"><i class="fa fa-check"></i><b>7.2</b> Getting to know the dataset</a><ul>
<li class="chapter" data-level="7.2.1" data-path="eda.html"><a href="eda.html#the-codebook"><i class="fa fa-check"></i><b>7.2.1</b> The codebook</a></li>
<li class="chapter" data-level="7.2.2" data-path="eda.html"><a href="eda.html#load-and-inspect-the-data"><i class="fa fa-check"></i><b>7.2.2</b> Load and inspect the data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="eda.html"><a href="eda.html#exploring-variables"><i class="fa fa-check"></i><b>7.3</b> Exploring variables</a><ul>
<li class="chapter" data-level="7.3.1" data-path="eda.html"><a href="eda.html#first-steps"><i class="fa fa-check"></i><b>7.3.1</b> First steps</a></li>
<li class="chapter" data-level="7.3.2" data-path="eda.html"><a href="eda.html#smoking-data-corrupted"><i class="fa fa-check"></i><b>7.3.2</b> Smoking data corrupted?</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="eda.html"><a href="eda.html#variable-engineering"><i class="fa fa-check"></i><b>7.4</b> Variable engineering</a><ul>
<li class="chapter" data-level="7.4.1" data-path="eda.html"><a href="eda.html#recoding-strategies"><i class="fa fa-check"></i><b>7.4.1</b> Recoding strategies</a></li>
<li class="chapter" data-level="7.4.2" data-path="eda.html"><a href="eda.html#factorization"><i class="fa fa-check"></i><b>7.4.2</b> “factorization”</a></li>
<li class="chapter" data-level="7.4.3" data-path="eda.html"><a href="eda.html#data-redundancy-in-std-variables"><i class="fa fa-check"></i><b>7.4.3</b> Data redundancy in STD variables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="eda.html"><a href="eda.html#the-dependent-variable"><i class="fa fa-check"></i><b>7.5</b> The dependent variable</a></li>
<li class="chapter" data-level="7.6" data-path="eda.html"><a href="eda.html#exploring-relationships-between-variables"><i class="fa fa-check"></i><b>7.6</b> Exploring relationships between variables</a><ul>
<li class="chapter" data-level="7.6.1" data-path="eda.html"><a href="eda.html#the-scatterplot"><i class="fa fa-check"></i><b>7.6.1</b> The scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="eda.html"><a href="eda.html#look-for-patterns-with-the-dependent-variable"><i class="fa fa-check"></i><b>7.7</b> Look for patterns with the dependent variable</a></li>
<li class="chapter" data-level="7.8" data-path="eda.html"><a href="eda.html#density-plots-show-class-distinction"><i class="fa fa-check"></i><b>7.8</b> Density plots show class distinction</a><ul>
<li class="chapter" data-level="7.8.1" data-path="eda.html"><a href="eda.html#the-xor-problem"><i class="fa fa-check"></i><b>7.8.1</b> The ‘xor’ problem</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="eda.html"><a href="eda.html#advanced-explorations"><i class="fa fa-check"></i><b>7.9</b> Advanced Explorations</a><ul>
<li class="chapter" data-level="7.9.1" data-path="eda.html"><a href="eda.html#pca"><i class="fa fa-check"></i><b>7.9.1</b> PCA</a></li>
<li class="chapter" data-level="7.9.2" data-path="eda.html"><a href="eda.html#clustering"><i class="fa fa-check"></i><b>7.9.2</b> Clustering</a></li>
<li class="chapter" data-level="7.9.3" data-path="eda.html"><a href="eda.html#k-means-clustering"><i class="fa fa-check"></i><b>7.9.3</b> k-Means clustering</a></li>
<li class="chapter" data-level="7.9.4" data-path="eda.html"><a href="eda.html#hierarchical-clustering"><i class="fa fa-check"></i><b>7.9.4</b> hierarchical clustering</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>8</b> Exercises</a><ul>
<li class="chapter" data-level="8.1" data-path="exercises.html"><a href="exercises.html#introduction-4"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis and Visualization using R (2)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stringr" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Processing text with: <code>stringr</code> and regex</h1>
<div id="introduction-2" class="section level2">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>This is the last presentation in the tidyverse series. It revolves around processing textual data: finding, extracting, and replacing patterns. Central to this task is <strong><em>pattern matching</em></strong> using regular expressions. Pattern matching is the process of finding, locating, extracting and replacing patterns in character data that usually cannot be literally described. <strong><em>Regular expression syntax</em></strong> is the language in which patterns are described in a wide range of programming languages, including R.</p>
<p>This topic has been dealt with in an introductory manner previously (course DAVuR1). And is repeated and expanded here. Instead of the base R functions we now switch to the <code>stringr</code> package.</p>
<p>As all packages from the tidyverse, <code>stringr</code> has many many functions (type <code>help(package = &quot;stringr&quot;)</code> to see which). this package has a great <a href="graphics/stringr.pdf">cheat sheet</a> as well.</p>
<p>Here, a few of them will be reviewed.</p>
<div id="a-few-remarks-on-locale" class="section level3">
<h3><span class="header-section-number">6.1.1</span> A few remarks on “locale”</h3>
<p>Many functions of the tidyverse packages related to time and text (and currency) accept arguments specifying the <strong><em>locale</em></strong>.
The locale is a container for all location-specific display of information.<br />
Think</p>
<ul>
<li>Character set of the language</li>
<li>Time zone, Daylight savings time</li>
<li>Thousands separator and decimal symbol</li>
<li>Currency symbol</li>
</ul>
<p>Dealing with locales is a big challenge indeed for any programming language. However, since this is only an introductory course we will stick to US english and work with the current locale for times only.
This note is to make you aware of the concept so that you remember this when the appropriate time comes.</p>
</div>
</div>
<div id="review-of-regular-expressions" class="section level2">
<h2><span class="header-section-number">6.2</span> Review of regular expressions</h2>
<p>Many of the <code>stringr</code> functions take regular expression as one of the arguments.
Regular expression syntax has been dealt with in a previous course/resentation. For your convenience, an overview is presented here as well.</p>
<div id="regex-syntax-elements" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Regex syntax elements</h3>
<p>A regex can be build out of any combination of</p>
<ul>
<li><strong>character sequences</strong> - Literal sequences, such as ‘chimp’</li>
<li><strong>character classes</strong> - A listing of possibilities for a single position.<br />
</li>
<li><strong>alternatives</strong> - Are defined by the pipe symbol <code>|</code>.</li>
<li><strong>quantifiers</strong> - How many times the preceding block should occur.</li>
<li><strong>anchors</strong> - <code>^</code> means matching at the start of a string. <code>$</code> means at the end.</li>
</ul>
<p>The <a href="graphics/stringr.pdf">stringr cheat sheet</a> also contains a summary of regex syntax.</p>
</div>
<div id="character-classes-and-negation" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Character classes and negation</h3>
<p>Characters classes -groups of matching characters for a single position- are placed between brackets: <code>[adgk]</code> means ‘a’ or ‘d’ or ‘g’ or ‘k’. Use a hyphen to create a series: <code>[3-9]</code> means digits 3 through 9 and <code>[a-zA-Z]</code> means all alphabet characters.</p>
<p>Character classes can be negated by putting a <code>^</code> at the beginning of the list: <code>[^adgk]</code> means anything <em>but</em> the letters a, d, g or k.</p>
<p>There is a special character</p>
<p>Since character classes such as <code>[0-9]</code> accur so frequently they have dedicated character classes -also called <strong><em>metacharacters</em></strong>- such as <code>[[:digit:]]</code> or (equivalently) <code>\\d</code>. The most important other ones are these</p>
<ul>
<li><strong>any character</strong> (wildcard) is specified by <code>.</code>. If you want to search for a literal dot, you need to <strong><em>escape</em></strong> its special meaning using two backslashes: <code>\\.</code></li>
<li><strong>digits</strong> <code>[[:digit:]]</code> or <code>\\d</code>: equivalent to <code>[0-9]</code></li>
<li><strong>alphabet characters</strong> <code>[[:alpha:]]</code>: equivalent to <code>[a-zA-Z]</code></li>
<li><strong>lowercase characters</strong> <code>[[:lower:]]</code>: equivalent to <code>[a-z]</code></li>
<li><strong>uppercase characters</strong> <code>[[:upper:]]</code>: equivalent to <code>[A-Z]</code></li>
<li><strong>whitespace characters</strong> <code>[[:space:]]</code> or <code>\\s</code>: Space, tab, vertical tab, newline, form feed, carriage return</li>
<li><strong>punctuation characters</strong> <code>[[:punct:]]</code>: One of !&quot;#$%&amp;’()*+,-./:;&lt;=&gt;?@[]^_`{|}~</li>
</ul>
<p>(have a look at the cheat sheet for all)</p>
</div>
<div id="quantifiers" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Quantifiers</h3>
<p>Quantifiers specify how often a (part of) a pattern should occur.</p>
<ul>
<li><strong><code>*</code></strong>: 0 or more times</li>
<li><strong><code>+</code></strong>: 1 or more times</li>
<li><strong><code>?</code></strong>: 0 or 1 time</li>
<li><strong><code>{n}</code></strong>: exactly <code>n</code> times</li>
<li><strong><code>{n,}</code></strong>: at least <code>n</code> times</li>
<li><strong><code>{,n}</code></strong>: at most <code>n</code> times</li>
<li><strong><code>{n, m}</code></strong>: at least <code>n</code> and at most <code>m</code> times.</li>
</ul>
<p>The <code>*</code> zero or more times and <code>?</code> zero or one time quantifiers are sometimes confusing. Why zero? A good example is the Dutch postal code. These are all valid postal codes</p>
<pre class="sourceCode r"><code class="sourceCode r">pc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1234 AA&quot;</span>, <span class="st">&quot;2345-BB&quot;</span>, <span class="st">&quot;3456CC&quot;</span>, <span class="st">&quot;4567 dd&quot;</span>)
pc</code></pre>
<pre><code>## [1] &quot;1234 AA&quot; &quot;2345-BB&quot; &quot;3456CC&quot;  &quot;4567 dd&quot;</code></pre>
<p>and therefore a pattern could be <code>&quot;\\d{4}[ -]?[a-zA-Z]{2}&quot;</code> where the question mark specifies that either a space or a hyphen may occur zero or one time: It may or may not be present.</p>
<p>The <code>stringr</code> package provides two nice utility functions to visualize regex matches in a character: <code>str_view_all()</code> and <code>str_view()</code>. The difference is that the latter function only shows the first match - if present.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view_all</span>(pc, <span class="st">&quot;^</span><span class="ch">\\</span><span class="st">d{4}[ -]?[a-zA-Z]{2}$&quot;</span>)</code></pre>
<div id="htmlwidget-6b82562872f5e3479f29" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-6b82562872f5e3479f29">{"x":{"html":"<ul>\n  <li><span class='match'>1234 AA<\/span><\/li>\n  <li><span class='match'>2345-BB<\/span><\/li>\n  <li><span class='match'>3456CC<\/span><\/li>\n  <li><span class='match'>4567 dd<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>As you can see, the last element (“56789aa”) is not a good postal code.</p>
<p>Note that <code>[a-zA-Z]</code> could have been replaced by <code>[[:alpha:]]</code>.</p>
</div>
<div id="anchoring" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Anchoring</h3>
<p>Using anchoring, you can make sure the matching string is not longer than you explicitly state.</p>
<ul>
<li><code>^</code> anchors a pattern to the start of a string</li>
<li><code>$</code> anchors a regex to the end of a string</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">sntc &lt;-<span class="st"> &quot;the path of the righteous man is beset on all sides by the iniquities of the selfish,  and the tyranny of evil men. --quote from?&quot;</span>

<span class="kw">str_view</span>(sntc, <span class="st">&quot;evil&quot;</span>) <span class="co">##matches</span></code></pre>
<div id="htmlwidget-2a01744eb53065b73285" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-2a01744eb53065b73285">{"x":{"html":"<ul>\n  <li>the path of the righteous man is beset on all sides by the iniquities of the selfish,  and the tyranny of <span class='match'>evil<\/span> men. --quote from?<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view</span>(sntc, <span class="st">&quot;evil$&quot;</span>) <span class="co">## does not match</span></code></pre>
<div id="htmlwidget-30dcdf3038871990be7a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-30dcdf3038871990be7a">{"x":{"html":"<ul>\n  <li>the path of the righteous man is beset on all sides by the iniquities of the selfish,  and the tyranny of evil men. --quote from?<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="alternatives" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Alternatives</h3>
<p>To apply two alternative choices for a single regex element you use the pipe symbol <code>|</code>. You can us parentheses <code>(foo[])</code> to fence alternatives off.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_view_all</span>(sntc, <span class="st">&quot;(y</span><span class="ch">\\</span><span class="st">s)|(</span><span class="ch">\\</span><span class="st">sf)&quot;</span>)</code></pre>
<div id="htmlwidget-07e95fee152228cf8255" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-07e95fee152228cf8255">{"x":{"html":"<ul>\n  <li>the path of the righteous man is beset on all sides b<span class='match'>y <\/span>the iniquities of the selfish,  and the tyrann<span class='match'>y <\/span>of evil men. --quote<span class='match'> f<\/span>rom?<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="the-stringr-essentials" class="section level2">
<h2><span class="header-section-number">6.3</span> The <code>stringr</code> essentials</h2>
<div id="case-conversion" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Case conversion</h3>
<p>These functions all change the capitalization of (some of) the word characters of an input string. They all ignore non-word characters such as punctiuation and other symbols.</p>
<ul>
<li><code>str_to_upper()</code> converts all word characters to uppercase</li>
<li><code>str_to_lower()</code> converts all word characters to lowercase</li>
<li><code>str_to_title()</code> capitalizes all first characters of words</li>
<li><code>str_to_sentence()</code> capitalizes the first character in the string, not after every period</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_to_title</span>(sntc)</code></pre>
<pre><code>## [1] &quot;The Path Of The Righteous Man Is Beset On All Sides By The Iniquities Of The Selfish,  And The Tyranny Of Evil Men. --Quote From?&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_to_sentence</span>(sntc)</code></pre>
<pre><code>## [1] &quot;The path of the righteous man is beset on all sides by the iniquities of the selfish,  and the tyranny of evil men. --quote from?&quot;</code></pre>
</div>
<div id="split-join-and-substring" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Split, join and substring</h3>
<p>Combining two vectors into one, one vector into one, or doing the reverse: splitting. These are all string-based operation that are carried out in scripting quite often.</p>
<p>Here are some joining operations, using <code>str_c()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">l1 &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
l2 &lt;-<span class="st"> </span>letters[<span class="dv">6</span><span class="op">:</span><span class="dv">10</span>]

<span class="kw">str_c</span>(l1, <span class="dt">collapse =</span> <span class="st">&quot;=&quot;</span>)</code></pre>
<pre><code>## [1] &quot;a=b=c=d=e&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_c</span>(l1, l2, <span class="dt">sep =</span> <span class="st">&quot;+&quot;</span>)</code></pre>
<pre><code>## [1] &quot;a+f&quot; &quot;b+g&quot; &quot;c+h&quot; &quot;d+i&quot; &quot;e+j&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_c</span>(l1, l2, <span class="dt">sep =</span> <span class="st">&quot;+&quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;=&quot;</span>)</code></pre>
<pre><code>## [1] &quot;a+f=b+g=c+h=d+i=e+j&quot;</code></pre>
<p>When you want to combine variables and text <code>str_glue()</code> comes in handy:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_glue</span>(<span class="st">&quot;The value of pi is {pi} and the first month of the year is {month.name[1]}&quot;</span>)</code></pre>
<pre><code>## The value of pi is 3.14159265358979 and the first month of the year is January</code></pre>
<p>This is a more friendly approach than with <code>paste()</code>.</p>
<p><strong>Splitting</strong> is slightly more tricky since it accepts a regex pattern as split argument. For instance, you can get the words of a sentence by splitting like this:</p>
<pre class="sourceCode r"><code class="sourceCode r">words &lt;-<span class="st"> </span><span class="kw">str_split</span>(sntc, <span class="st">&quot;([[:punct:]]|[[:space:]])+&quot;</span>)
words
<span class="co">##alternative</span>
<span class="co">#str_split(sntc, &quot;[^a-zA-Z]+&quot;)</span></code></pre>
<pre><code>## [[1]]
##  [1] &quot;the&quot;        &quot;path&quot;       &quot;of&quot;         &quot;the&quot;        &quot;righteous&quot; 
##  [6] &quot;man&quot;        &quot;is&quot;         &quot;beset&quot;      &quot;on&quot;         &quot;all&quot;       
## [11] &quot;sides&quot;      &quot;by&quot;         &quot;the&quot;        &quot;iniquities&quot; &quot;of&quot;        
## [16] &quot;the&quot;        &quot;selfish&quot;    &quot;and&quot;        &quot;the&quot;        &quot;tyranny&quot;   
## [21] &quot;of&quot;         &quot;evil&quot;       &quot;men&quot;        &quot;quote&quot;      &quot;from&quot;      
## [26] &quot;&quot;</code></pre>
<p>There are two ways to get parts of character strings, or <strong><em>substrings</em></strong>. The first is by index. You can omit both <code>start</code> and <code>end</code> arguments; they will deault to start and end of the string, respectively.</p>
<pre class="sourceCode r"><code class="sourceCode r">nucs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Adenine&quot;</span>, <span class="st">&quot;Guanine&quot;</span>, <span class="st">&quot;Cytosine&quot;</span>, <span class="st">&quot;Thymine&quot;</span>)
<span class="kw">str_sub</span>(nucs, <span class="dt">end =</span> <span class="dv">3</span>)</code></pre>
<pre><code>## [1] &quot;Ade&quot; &quot;Gua&quot; &quot;Cyt&quot; &quot;Thy&quot;</code></pre>
<p>You can even use this function to change the substring that is removed</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_sub</span>(nucs, <span class="dt">start =</span> <span class="dv">4</span>) &lt;-<span class="st"> &quot;......&quot;</span>
nucs</code></pre>
<pre><code>## [1] &quot;Ade......&quot; &quot;Gua......&quot; &quot;Cyt......&quot; &quot;Thy......&quot;</code></pre>
<p>This does not work with literals! The following chunk gives and error:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_sub</span>(<span class="kw">c</span>(<span class="st">&quot;Adenine&quot;</span>, <span class="st">&quot;Guanine&quot;</span>, <span class="st">&quot;Cytosine&quot;</span>, <span class="st">&quot;Thymine&quot;</span>), <span class="dt">start =</span> <span class="dv">4</span>) &lt;-<span class="st"> &quot;......&quot;</span></code></pre>
<pre><code>## Error in str_sub(c(&quot;Adenine&quot;, &quot;Guanine&quot;, &quot;Cytosine&quot;, &quot;Thymine&quot;), start = 4) &lt;- &quot;......&quot;: target of assignment expands to non-language object</code></pre>
</div>
<div id="matching" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Matching</h3>
<p>When you <strong>match</strong> a pattern to a string, you usuially want to know <strong><em>if</em></strong> it is there, <strong>which</strong> elements have it, <strong><em>where</em></strong> it is located in those elements or <strong><em>how often</em></strong> it is present. For each of these question there is a dedicated function:</p>
<ul>
<li><p><code>str_detect(string, pattern)</code> detects the presence of a pattern match in a string.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_detect</span>(fruits, <span class="st">&quot;[Aa]&quot;</span>)</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE</code></pre></li>
<li><p><code>str_subset(string, pattern)</code> returns only the strings that contain a pattern match</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_subset</span>(fruits, <span class="st">&quot;[Aa]&quot;</span>)</code></pre>
<pre><code>## [1] &quot;Banana&quot; &quot;Apple&quot;  &quot;Orange&quot;</code></pre></li>
<li><p><code>str_which(string, pattern)</code> finds the indexes of strings that contain a pattern match.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_which</span>(fruits, <span class="st">&quot;[Aa]&quot;</span>)</code></pre>
<pre><code>## [1] 1 2 3</code></pre></li>
<li><p><code>str_count(string, pattern)</code> counts the number of matches in a string.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_count</span>(fruits, <span class="st">&quot;[Aa]&quot;</span>)</code></pre>
<pre><code>## [1] 3 1 1 0</code></pre></li>
<li><p><code>str_locate(string, pattern)</code> and <code>str_locate_all(string, pattern)</code> locate the positions of pattern matches in a string</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_locate_all</span>(fruits, <span class="st">&quot;[Aa]&quot;</span>)</code></pre>
<pre><code>## [[1]]
##      start end
## [1,]     2   2
## [2,]     4   4
## [3,]     6   6
## 
## [[2]]
##      start end
## [1,]     1   1
## 
## [[3]]
##      start end
## [1,]     3   3
## 
## [[4]]
##      start end</code></pre></li>
</ul>
</div>
<div id="extracting-and-replacing" class="section level3">
<h3><span class="header-section-number">6.3.4</span> Extracting and replacing</h3>
<p>If you want to obtain the character sequences matching your pattern you can use the <code>str_extract()</code> and <code>str_extract_all()</code> functions:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_extract_all</span>(fruits, <span class="st">&quot;an&quot;</span>)</code></pre>
<pre><code>## [[1]]
## [1] &quot;an&quot; &quot;an&quot;
## 
## [[2]]
## character(0)
## 
## [[3]]
## [1] &quot;an&quot;
## 
## [[4]]
## character(0)</code></pre>
<p>Finally, replacing occurrences of a pattern is carried out using <code>str_replace()</code> or <code>str_replace_all()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_replace_all</span>(fruits, <span class="st">&quot;an&quot;</span>, <span class="st">&quot;..&quot;</span>)</code></pre>
<pre><code>## [1] &quot;B....a&quot; &quot;Apple&quot;  &quot;Or..ge&quot; &quot;Cherry&quot;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="date-time.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-stringr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
