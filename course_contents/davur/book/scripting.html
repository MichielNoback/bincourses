<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Scripting | Data Analysis &amp; Visualization using R (1)</title>
  <meta name="description" content="This gitbook accompanies the course Data Analysis &amp; Visualization using R 1 (DAVuR1) of the minor Bioinformatics for Life Science Students. It is organized by the Hanze University of Applied Science." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Scripting | Data Analysis &amp; Visualization using R (1)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This gitbook accompanies the course Data Analysis &amp; Visualization using R 1 (DAVuR1) of the minor Bioinformatics for Life Science Students. It is organized by the Hanze University of Applied Science." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Scripting | Data Analysis &amp; Visualization using R (1)" />
  
  <meta name="twitter:description" content="This gitbook accompanies the course Data Analysis &amp; Visualization using R 1 (DAVuR1) of the minor Bioinformatics for Life Science Students. It is organized by the Hanze University of Applied Science." />
  

<meta name="author" content="Michiel Noback" />


<meta name="date" content="2020-04-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions-1.html">
<link rel="next" href="dataframe-manipulations-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DAVuR eBook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Getting started</a></li>
<li class="chapter" data-level="2" data-path="toolbox.html"><a href="toolbox.html"><i class="fa fa-check"></i><b>2</b> The toolbox</a><ul>
<li class="chapter" data-level="2.1" data-path="toolbox.html"><a href="toolbox.html#why-do-statistical-programming"><i class="fa fa-check"></i><b>2.1</b> Why do statistical programming?</a><ul>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#overview-of-the-toolbox"><i class="fa fa-check"></i>Overview of the toolbox</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="toolbox.html"><a href="toolbox.html#tool-1-the-r-programming-language"><i class="fa fa-check"></i><b>2.2</b> Tool 1: The R programming language</a></li>
<li class="chapter" data-level="2.3" data-path="toolbox.html"><a href="toolbox.html#tool-2-rstudio-as-development-environment"><i class="fa fa-check"></i><b>2.3</b> Tool 2: RStudio as development environment</a></li>
<li class="chapter" data-level="2.4" data-path="toolbox.html"><a href="toolbox.html#tool-3-r-markdown"><i class="fa fa-check"></i><b>2.4</b> Tool 3: R Markdown</a></li>
<li class="chapter" data-level="2.5" data-path="toolbox.html"><a href="toolbox.html#resources"><i class="fa fa-check"></i><b>2.5</b> Resources</a><ul>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#swirl-course"><i class="fa fa-check"></i>Swirl course</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#data-files"><i class="fa fa-check"></i>Data Files</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#web-resources-and-references"><i class="fa fa-check"></i>Web resources and references</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html"><i class="fa fa-check"></i><b>3</b> Basic R - coding basics</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#first-look-at-vectors-fuctions-and-variables"><i class="fa fa-check"></i><b>3.1</b> First look at vectors, fuctions and variables</a><ul>
<li class="chapter" data-level="3.1.1" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#doing-math-in-the-console"><i class="fa fa-check"></i><b>3.1.1</b> Doing Math in the console</a></li>
<li class="chapter" data-level="3.1.2" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#an-expression-dissected"><i class="fa fa-check"></i><b>3.1.2</b> An expression dissected</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#getting-help-on-a-function"><i class="fa fa-check"></i><b>3.2.1</b> Getting help on a function</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#variables"><i class="fa fa-check"></i><b>3.3</b> Variables</a></li>
<li class="chapter" data-level="3.4" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#vectors"><i class="fa fa-check"></i><b>3.4</b> Vectors</a><ul>
<li class="chapter" data-level="3.4.1" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#r-is-completely-vector-based"><i class="fa fa-check"></i><b>3.4.1</b> R is completely vector-based</a></li>
<li class="chapter" data-level="3.4.2" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#five-datatype-that-live-in-vectors"><i class="fa fa-check"></i><b>3.4.2</b> Five datatype that live in vectors</a></li>
<li class="chapter" data-level="3.4.3" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#creating-vectors"><i class="fa fa-check"></i><b>3.4.3</b> Creating vectors</a></li>
<li class="chapter" data-level="3.4.4" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#vector-fiddling"><i class="fa fa-check"></i><b>3.4.4</b> Vector fiddling</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#other-operators"><i class="fa fa-check"></i><b>3.5</b> Other operators</a><ul>
<li class="chapter" data-level="3.5.1" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#logical-operators"><i class="fa fa-check"></i><b>3.5.1</b> Logical operators</a></li>
<li class="chapter" data-level="3.5.2" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#modulo"><i class="fa fa-check"></i><b>3.5.2</b> Modulo: <code>%%</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#integer-division-and-rounding"><i class="fa fa-check"></i><b>3.5.3</b> Integer division <code>%/%</code> and rounding</a></li>
<li class="chapter" data-level="3.5.4" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#the-in-operator"><i class="fa fa-check"></i><b>3.5.4</b> The <code>%in%</code> operator</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#vector-creation-methods"><i class="fa fa-check"></i><b>3.6</b> Vector creation methods</a></li>
<li class="chapter" data-level="3.7" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#selecting-vector-elements"><i class="fa fa-check"></i><b>3.7</b> Selecting vector elements</a></li>
<li class="chapter" data-level="3.8" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#some-coding-style-rules-rules-for-writing-code"><i class="fa fa-check"></i><b>3.8</b> Some coding style rules rules for writing code</a></li>
<li class="chapter" data-level="3.9" data-path="basic-r-coding-basics.html"><a href="basic-r-coding-basics.html#the-best-keyboard-shortcuts-for-rstudio"><i class="fa fa-check"></i><b>3.9</b> The best keyboard shortcuts for RStudio</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html"><i class="fa fa-check"></i><b>4</b> Basic R - plotting basics</a><ul>
<li class="chapter" data-level="4.1" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#basic-embedded-plot-types"><i class="fa fa-check"></i><b>4.1</b> Basic embedded plot types</a><ul>
<li class="chapter" data-level="4.1.1" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#scatter-and-line-plots"><i class="fa fa-check"></i><b>4.1.1</b> Scatter and line plots</a></li>
<li class="chapter" data-level="4.1.2" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#barplots"><i class="fa fa-check"></i><b>4.1.2</b> Barplots</a></li>
<li class="chapter" data-level="4.1.3" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#histograms"><i class="fa fa-check"></i><b>4.1.3</b> Histograms</a></li>
<li class="chapter" data-level="4.1.4" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#density-plot-as-alternative-to-hist"><i class="fa fa-check"></i><b>4.1.4</b> Density plot as alternative to <code>hist()</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#boxplots"><i class="fa fa-check"></i><b>4.1.5</b> Boxplots</a></li>
<li class="chapter" data-level="4.1.6" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#adding-more-data-and-a-legend"><i class="fa fa-check"></i><b>4.1.6</b> Adding more data and a legend</a></li>
<li class="chapter" data-level="4.1.7" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#helper-lines-and-lm"><i class="fa fa-check"></i><b>4.1.7</b> Helper lines and <code>lm()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="basic-r-plotting-basics.html"><a href="basic-r-plotting-basics.html#graphical-parameters-to-plot"><i class="fa fa-check"></i><b>4.2</b> Graphical parameters to <code>plot()</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html"><i class="fa fa-check"></i><b>5</b> Complex Datatypes and File Reading</a><ul>
<li class="chapter" data-level="5.1" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#matrices-are-vectors-with-dimensions"><i class="fa fa-check"></i><b>5.1</b> Matrices are vectors with dimensions</a></li>
<li class="chapter" data-level="5.2" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#factors-nominal-ordinal-scales"><i class="fa fa-check"></i><b>5.2</b> Factors: Nominal &amp; Ordinal scales</a></li>
<li class="chapter" data-level="5.3" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#lists"><i class="fa fa-check"></i><b>5.3</b> Lists</a></li>
<li class="chapter" data-level="5.4" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#dataframes"><i class="fa fa-check"></i><b>5.4</b> Dataframes</a><ul>
<li class="chapter" data-level="5.4.1" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#selections-on-dataframes"><i class="fa fa-check"></i><b>5.4.1</b> Selections on dataframes</a></li>
<li class="chapter" data-level="5.4.2" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#read-from-file-using-read.table"><i class="fa fa-check"></i><b>5.4.2</b> Read from file using <code>read.table()</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="complex-datatypes-and-file-reading.html"><a href="complex-datatypes-and-file-reading.html#dataframe-manipulations"><i class="fa fa-check"></i><b>5.4.3</b> Dataframe manipulations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="functions-1.html"><a href="functions-1.html#dealing-with-nas"><i class="fa fa-check"></i><b>6.1</b> Dealing with NAs</a></li>
<li class="chapter" data-level="6.2" data-path="functions-1.html"><a href="functions-1.html#descriptive-statistics"><i class="fa fa-check"></i><b>6.2</b> Descriptive statistics</a></li>
<li class="chapter" data-level="6.3" data-path="functions-1.html"><a href="functions-1.html#general-purpose-functions"><i class="fa fa-check"></i><b>6.3</b> General purpose functions</a></li>
<li class="chapter" data-level="6.4" data-path="functions-1.html"><a href="functions-1.html#convert-numeric-vector-to-factor-cut"><i class="fa fa-check"></i><b>6.4</b> Convert numeric vector to factor: <code>cut()</code></a></li>
<li class="chapter" data-level="6.5" data-path="functions-1.html"><a href="functions-1.html#file-io-revisited"><i class="fa fa-check"></i><b>6.5</b> File I/O revisited</a></li>
<li class="chapter" data-level="6.6" data-path="functions-1.html"><a href="functions-1.html#pattern-matching"><i class="fa fa-check"></i><b>6.6</b> Pattern matching</a><ul>
<li class="chapter" data-level="6.6.1" data-path="functions-1.html"><a href="functions-1.html#regex-syntax"><i class="fa fa-check"></i><b>6.6.1</b> Regex syntax</a></li>
<li class="chapter" data-level="6.6.2" data-path="functions-1.html"><a href="functions-1.html#quantifiers"><i class="fa fa-check"></i><b>6.6.2</b> Quantifiers</a></li>
<li class="chapter" data-level="6.6.3" data-path="functions-1.html"><a href="functions-1.html#some-examples"><i class="fa fa-check"></i><b>6.6.3</b> Some examples</a></li>
<li class="chapter" data-level="6.6.4" data-path="functions-1.html"><a href="functions-1.html#anchoring"><i class="fa fa-check"></i><b>6.6.4</b> Anchoring</a></li>
<li class="chapter" data-level="6.6.5" data-path="functions-1.html"><a href="functions-1.html#metacharacters-special-character-classes"><i class="fa fa-check"></i><b>6.6.5</b> Metacharacters: Special character classes</a></li>
<li class="chapter" data-level="6.6.6" data-path="functions-1.html"><a href="functions-1.html#locating-and-extracting"><i class="fa fa-check"></i><b>6.6.6</b> Locating and Extracting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="scripting.html"><a href="scripting.html"><i class="fa fa-check"></i><b>7</b> Scripting</a><ul>
<li class="chapter" data-level="7.1" data-path="scripting.html"><a href="scripting.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="scripting.html"><a href="scripting.html#flow-control"><i class="fa fa-check"></i><b>7.2</b> Flow control</a><ul>
<li class="chapter" data-level="7.2.1" data-path="scripting.html"><a href="scripting.html#conditional-execution-with-ifelse"><i class="fa fa-check"></i><b>7.2.1</b> Conditional execution with <code>if/else</code></a></li>
<li class="chapter" data-level="7.2.2" data-path="scripting.html"><a href="scripting.html#iteration-with-for"><i class="fa fa-check"></i><b>7.2.2</b> Iteration with <code>for(){}</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="scripting.html"><a href="scripting.html#conditional-iteration-with-while"><i class="fa fa-check"></i><b>7.2.3</b> Conditional iteration with <code>while(){}</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="scripting.html"><a href="scripting.html#creating-functions"><i class="fa fa-check"></i><b>7.3</b> Creating functions</a><ul>
<li class="chapter" data-level="7.3.1" data-path="scripting.html"><a href="scripting.html#errors-and-warnings"><i class="fa fa-check"></i><b>7.3.1</b> Errors and warnings</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="scripting.html"><a href="scripting.html#scripting-1"><i class="fa fa-check"></i><b>7.4</b> Scripting</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html"><i class="fa fa-check"></i><b>8</b> Dataframe manipulations</a><ul>
<li class="chapter" data-level="8.1" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#the-apply-family-of-functions"><i class="fa fa-check"></i><b>8.1</b> The <code>apply()</code> family of functions</a><ul>
<li class="chapter" data-level="8.1.1" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#apply-apply-functions-over-array-margins"><i class="fa fa-check"></i><b>8.1.1</b> <code>apply()</code>: Apply Functions Over Array Margins</a></li>
<li class="chapter" data-level="8.1.2" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#lapply-apply-a-function-over-a-list-or-vector"><i class="fa fa-check"></i><b>8.1.2</b> <code>lapply()</code>: Apply a Function over a List or Vector</a></li>
<li class="chapter" data-level="8.1.3" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#sapply-apply-a-function-over-a-list-or-vector-and-simplify"><i class="fa fa-check"></i><b>8.1.3</b> <code>sapply()</code>: Apply a Function over a List or Vector and Simplify</a></li>
<li class="chapter" data-level="8.1.4" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#tapply-apply-a-function-over-a-ragged-array"><i class="fa fa-check"></i><b>8.1.4</b> <code>tapply()</code>: Apply a Function Over a Ragged Array</a></li>
<li class="chapter" data-level="8.1.5" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#split-divide-into-groups-and-reassemble"><i class="fa fa-check"></i><b>8.1.5</b> <code>split()</code>: Divide into Groups and Reassemble</a></li>
<li class="chapter" data-level="8.1.6" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#aggregate-compute-summary-statistics-of-data-subsets"><i class="fa fa-check"></i><b>8.1.6</b> <code>aggregate()</code>: Compute Summary Statistics of Data Subsets</a></li>
<li class="chapter" data-level="8.1.7" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#many-roads-lead-to-rome"><i class="fa fa-check"></i><b>8.1.7</b> Many roads lead to Rome</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#usecases"><i class="fa fa-check"></i><b>8.2</b> Example Use Cases</a><ul>
<li class="chapter" data-level="8.2.1" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#dfselection"><i class="fa fa-check"></i><b>8.2.1</b> Dataframe Selections</a></li>
<li class="chapter" data-level="8.2.2" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#apply"><i class="fa fa-check"></i><b>8.2.2</b> Apply</a></li>
<li class="chapter" data-level="8.2.3" data-path="dataframe-manipulations-1.html"><a href="dataframe-manipulations-1.html#embeddeddf"><i class="fa fa-check"></i><b>8.2.3</b> Processing Embedded Dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>9</b> Exercises</a><ul>
<li class="chapter" data-level="9.1" data-path="exercises.html"><a href="exercises.html#toolbox-1"><i class="fa fa-check"></i><b>9.1</b> Toolbox</a><ul>
<li class="chapter" data-level="9.1.1" data-path="exercises.html"><a href="exercises.html#resume"><i class="fa fa-check"></i><b>9.1.1</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="exercises.html"><a href="exercises.html#basic-r"><i class="fa fa-check"></i><b>9.2</b> Basic R</a><ul>
<li class="chapter" data-level="9.2.1" data-path="exercises.html"><a href="exercises.html#math-in-the-console"><i class="fa fa-check"></i><b>9.2.1</b> Math in the console</a></li>
<li class="chapter" data-level="9.2.2" data-path="exercises.html"><a href="exercises.html#first-look-at-functions"><i class="fa fa-check"></i><b>9.2.2</b> First look at functions</a></li>
<li class="chapter" data-level="9.2.3" data-path="exercises.html"><a href="exercises.html#variables-1"><i class="fa fa-check"></i><b>9.2.3</b> Variables</a></li>
<li class="chapter" data-level="" data-path="exercises.html"><a href="exercises.html#plotting-rules"><i class="fa fa-check"></i>Plotting rules</a></li>
<li class="chapter" data-level="9.2.4" data-path="exercises.html"><a href="exercises.html#stair-walking-and-heart-rate"><i class="fa fa-check"></i><b>9.2.4</b> Stair walking and heart rate</a></li>
<li class="chapter" data-level="9.2.5" data-path="exercises.html"><a href="exercises.html#more-subjects"><i class="fa fa-check"></i><b>9.2.5</b> More subjects</a></li>
<li class="chapter" data-level="9.2.6" data-path="exercises.html"><a href="exercises.html#chickens-on-a-diet"><i class="fa fa-check"></i><b>9.2.6</b> Chickens on a diet</a></li>
<li class="chapter" data-level="9.2.7" data-path="exercises.html"><a href="exercises.html#chicken-bar-plot"><i class="fa fa-check"></i><b>9.2.7</b> Chicken bar plot</a></li>
<li class="chapter" data-level="9.2.8" data-path="exercises.html"><a href="exercises.html#discoveries"><i class="fa fa-check"></i><b>9.2.8</b> Discoveries</a></li>
<li class="chapter" data-level="9.2.9" data-path="exercises.html"><a href="exercises.html#lung-cancer"><i class="fa fa-check"></i><b>9.2.9</b> Lung cancer</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="exercises.html"><a href="exercises.html#complex-datatypes"><i class="fa fa-check"></i><b>9.3</b> Complex datatypes</a><ul>
<li class="chapter" data-level="9.3.1" data-path="exercises.html"><a href="exercises.html#creating-factors"><i class="fa fa-check"></i><b>9.3.1</b> Creating factors</a></li>
<li class="chapter" data-level="9.3.2" data-path="exercises.html"><a href="exercises.html#a-dictionary-with-a-named-vector"><i class="fa fa-check"></i><b>9.3.2</b> A dictionary with a named vector</a></li>
<li class="chapter" data-level="9.3.3" data-path="exercises.html"><a href="exercises.html#airquality"><i class="fa fa-check"></i><b>9.3.3</b> airquality</a></li>
<li class="chapter" data-level="9.3.4" data-path="exercises.html"><a href="exercises.html#bird-observations"><i class="fa fa-check"></i><b>9.3.4</b> Bird observations</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="exercises.html"><a href="exercises.html#regular-expressions"><i class="fa fa-check"></i><b>9.4</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.4.1" data-path="exercises.html"><a href="exercises.html#restriction-enzymes-1"><i class="fa fa-check"></i><b>9.4.1</b> Restriction enzymes</a></li>
<li class="chapter" data-level="9.4.2" data-path="exercises.html"><a href="exercises.html#prosite-patterns-1"><i class="fa fa-check"></i><b>9.4.2</b> Prosite Patterns</a></li>
<li class="chapter" data-level="9.4.3" data-path="exercises.html"><a href="exercises.html#fasta-headers"><i class="fa fa-check"></i><b>9.4.3</b> Fasta Headers</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="exercises.html"><a href="exercises.html#scripting-2"><i class="fa fa-check"></i><b>9.5</b> Scripting</a><ul>
<li class="chapter" data-level="9.5.1" data-path="exercises.html"><a href="exercises.html#illegal-reproductions"><i class="fa fa-check"></i><b>9.5.1</b> Illegal reproductions</a></li>
<li class="chapter" data-level="9.5.2" data-path="exercises.html"><a href="exercises.html#interquantile-ranges"><i class="fa fa-check"></i><b>9.5.2</b> Interquantile ranges</a></li>
<li class="chapter" data-level="9.5.3" data-path="exercises.html"><a href="exercises.html#vector-distance"><i class="fa fa-check"></i><b>9.5.3</b> Vector distance</a></li>
<li class="chapter" data-level="9.5.4" data-path="exercises.html"><a href="exercises.html#gc-percentage-of-dna"><i class="fa fa-check"></i><b>9.5.4</b> G/C percentage of DNA</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="exercises.html"><a href="exercises.html#function-apply-and-its-relatives"><i class="fa fa-check"></i><b>9.6</b> Function <code>apply</code> and its relatives</a><ul>
<li class="chapter" data-level="9.6.1" data-path="exercises.html"><a href="exercises.html#whale-selenium"><i class="fa fa-check"></i><b>9.6.1</b> Whale selenium</a></li>
<li class="chapter" data-level="9.6.2" data-path="exercises.html"><a href="exercises.html#chickweight"><i class="fa fa-check"></i><b>9.6.2</b> ChickWeight</a></li>
<li class="chapter" data-level="9.6.3" data-path="exercises.html"><a href="exercises.html#food-constituents"><i class="fa fa-check"></i><b>9.6.3</b> Food constituents</a></li>
<li class="chapter" data-level="9.6.4" data-path="exercises.html"><a href="exercises.html#urine-properties"><i class="fa fa-check"></i><b>9.6.4</b> Urine properties</a></li>
<li class="chapter" data-level="9.6.5" data-path="exercises.html"><a href="exercises.html#bird-observations-revisited"><i class="fa fa-check"></i><b>9.6.5</b> Bird observations revisited</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="exercise-solutions.html"><a href="exercise-solutions.html"><i class="fa fa-check"></i><b>10</b> Exercise solutions</a><ul>
<li class="chapter" data-level="10.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#toolbox-2"><i class="fa fa-check"></i><b>10.1</b> Toolbox</a><ul>
<li class="chapter" data-level="10.1.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#resume-1"><i class="fa fa-check"></i><b>10.1.1</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#basic-r-1"><i class="fa fa-check"></i><b>10.2</b> Basic R</a><ul>
<li class="chapter" data-level="10.2.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#math-in-the-console-1"><i class="fa fa-check"></i><b>10.2.1</b> Math in the console</a></li>
<li class="chapter" data-level="10.2.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#first-look-at-functions-1"><i class="fa fa-check"></i><b>10.2.2</b> First look at functions</a></li>
<li class="chapter" data-level="10.2.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#variables-2"><i class="fa fa-check"></i><b>10.2.3</b> Variables</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#plotting-rules-1"><i class="fa fa-check"></i>Plotting rules</a></li>
<li class="chapter" data-level="10.2.4" data-path="exercise-solutions.html"><a href="exercise-solutions.html#stair-walking-and-heart-rate-1"><i class="fa fa-check"></i><b>10.2.4</b> Stair walking and heart rate</a></li>
<li class="chapter" data-level="10.2.5" data-path="exercise-solutions.html"><a href="exercise-solutions.html#more-subjects-1"><i class="fa fa-check"></i><b>10.2.5</b> More subjects</a></li>
<li class="chapter" data-level="10.2.6" data-path="exercise-solutions.html"><a href="exercise-solutions.html#chickens-on-a-diet-1"><i class="fa fa-check"></i><b>10.2.6</b> Chickens on a diet</a></li>
<li class="chapter" data-level="10.2.7" data-path="exercise-solutions.html"><a href="exercise-solutions.html#chicken-bar-plot-1"><i class="fa fa-check"></i><b>10.2.7</b> Chicken bar plot</a></li>
<li class="chapter" data-level="10.2.8" data-path="exercise-solutions.html"><a href="exercise-solutions.html#discoveries-1"><i class="fa fa-check"></i><b>10.2.8</b> Discoveries</a></li>
<li class="chapter" data-level="10.2.9" data-path="exercise-solutions.html"><a href="exercise-solutions.html#lung-cancer-1"><i class="fa fa-check"></i><b>10.2.9</b> Lung cancer</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#complex-datatypes-1"><i class="fa fa-check"></i><b>10.3</b> Complex datatypes</a><ul>
<li class="chapter" data-level="10.3.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#creating-factors-1"><i class="fa fa-check"></i><b>10.3.1</b> Creating factors</a></li>
<li class="chapter" data-level="10.3.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#a-dictionary-with-a-named-vector-1"><i class="fa fa-check"></i><b>10.3.2</b> A dictionary with a named vector</a></li>
<li class="chapter" data-level="10.3.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#airquality-1"><i class="fa fa-check"></i><b>10.3.3</b> airquality</a></li>
<li class="chapter" data-level="10.3.4" data-path="exercise-solutions.html"><a href="exercise-solutions.html#bird-observations-1"><i class="fa fa-check"></i><b>10.3.4</b> Bird observations</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="exercise-solutions.html"><a href="exercise-solutions.html#regular-expressions-1"><i class="fa fa-check"></i><b>10.4</b> Regular Expressions</a><ul>
<li class="chapter" data-level="10.4.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#restriction-enzymes-2"><i class="fa fa-check"></i><b>10.4.1</b> Restriction enzymes</a></li>
<li class="chapter" data-level="10.4.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#prosite-patterns-2"><i class="fa fa-check"></i><b>10.4.2</b> Prosite Patterns</a></li>
<li class="chapter" data-level="10.4.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#fasta-headers-1"><i class="fa fa-check"></i><b>10.4.3</b> Fasta Headers</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="exercise-solutions.html"><a href="exercise-solutions.html#scripting-3"><i class="fa fa-check"></i><b>10.5</b> Scripting</a><ul>
<li class="chapter" data-level="10.5.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#illegal-reproductions-1"><i class="fa fa-check"></i><b>10.5.1</b> Illegal reproductions</a></li>
<li class="chapter" data-level="10.5.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#interquantile-ranges-1"><i class="fa fa-check"></i><b>10.5.2</b> Interquantile ranges</a></li>
<li class="chapter" data-level="10.5.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#vector-distance-1"><i class="fa fa-check"></i><b>10.5.3</b> Vector distance</a></li>
<li class="chapter" data-level="10.5.4" data-path="exercise-solutions.html"><a href="exercise-solutions.html#gc-percentage-of-dna-1"><i class="fa fa-check"></i><b>10.5.4</b> G/C percentage of DNA</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="exercise-solutions.html"><a href="exercise-solutions.html#function-apply-and-its-relatives-1"><i class="fa fa-check"></i><b>10.6</b> Function <code>apply</code> and its relatives</a><ul>
<li class="chapter" data-level="10.6.1" data-path="exercise-solutions.html"><a href="exercise-solutions.html#whale-selenium-1"><i class="fa fa-check"></i><b>10.6.1</b> Whale selenium</a></li>
<li class="chapter" data-level="10.6.2" data-path="exercise-solutions.html"><a href="exercise-solutions.html#chickweight-1"><i class="fa fa-check"></i><b>10.6.2</b> ChickWeight</a></li>
<li class="chapter" data-level="10.6.3" data-path="exercise-solutions.html"><a href="exercise-solutions.html#food-constituents-1"><i class="fa fa-check"></i><b>10.6.3</b> Food constituents</a></li>
<li class="chapter" data-level="10.6.4" data-path="exercise-solutions.html"><a href="exercise-solutions.html#urine-properties-1"><i class="fa fa-check"></i><b>10.6.4</b> Urine properties</a></li>
<li class="chapter" data-level="10.6.5" data-path="exercise-solutions.html"><a href="exercise-solutions.html#bird-observations-revisited-1"><i class="fa fa-check"></i><b>10.6.5</b> Bird observations revisited</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis &amp; Visualization using R (1)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scripting" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Scripting</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<p>So far you have only seen R code used in the console, in code chunks of an RMarkdown document, or maybe in an R script in the form of a scratchpad. The code you have seen consisted of (series of) R statements with one or more function calls.<br />
There has been no conditional code, no repeated operations and no extraction of blocks of code into something reusable, a custom function. In short, you have not written any <em>program</em> or <em>script</em> yet.</p>
<p>This chapter deals with that. It introduces conditional execution and custom functions.</p>
</div>
<div id="flow-control" class="section level2">
<h2><span class="header-section-number">7.2</span> Flow control</h2>
<blockquote>
<p>Flow control constitutes a series of code elements used to control whether some code blocks are executed or not, and how many times</p>
</blockquote>
<p>These programming concepts and structures are used for flow control:</p>
<ul>
<li>Conditional execution: <code>if(){} else if(){} else{}</code></li>
<li>Repeated execution: <code>for() {}</code></li>
<li>Repeated conditional execution: <code>while(){}</code></li>
</ul>
<p>For those of you with experience in other programming languages: there is no switch expression. There is a <code>switch()</code> function however, but it is not dealt with in this eBook.</p>
<div id="conditional-execution-with-ifelse" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Conditional execution with <code>if/else</code></h3>
<p>There are several applications for conditionals, with differing language constructs:</p>
<ul>
<li>the <code>if(COND) {&lt;TRUE&gt;} else {&lt;FALSE&gt;}</code> code block for controlling program flow</li>
<li>the <code>if (COND) &lt;TRUE&gt; else &lt;FALSE&gt;</code> expression as a shorthand for the code block</li>
<li>the <code>ifelse(COND, &lt;TRUE&gt;, &lt;FALSE&gt;)</code> function for use on dataframes</li>
</ul>
<p>As you can see there is always a <strong><em>condition</em></strong> to be tested. This expression should return a logical value: TRUE or FALSE.</p>
<p>All three are discussed in the following slides.</p>
<div id="the-if-else-code-block" class="section level4 unnumbered">
<h4>The <code>if() {} else {}</code> code block</h4>
<p>The <code>if(COND) {&lt;TRUE&gt;} else {&lt;FALSE&gt;}</code> code block knows several required and several optional elements.<br />
At the minimum there is an <code>if(COND) {}</code> element where <code>COND</code> is an expression evaluating to a Logical.</p>
<pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="dv">43</span>
<span class="cf">if</span> (age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span>) {
    <span class="kw">print</span>(<span class="st">&quot;Adult&quot;</span>)
}</code></pre>
<pre><code>## [1] &quot;Adult&quot;</code></pre>
</div>
<div id="if-shorthand" class="section level4 unnumbered">
<h4><code>if()</code> shorthand</h4>
<p>If there is only one statement within a block you can omit the curly braces:</p>
<pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="dv">43</span>
<span class="cf">if</span> (age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span>) <span class="kw">print</span>(<span class="st">&quot;Adult&quot;</span>)</code></pre>
<pre><code>## [1] &quot;Adult&quot;</code></pre>
<p>Remember that the semicolon at the end of a statement is optional in R and is usually omitted.</p>
</div>
<div id="if-can-have-an-else" class="section level4 unnumbered">
<h4><code>if()</code> can have an <code>else {}</code></h4>
<p>When there is an alternative course of action when the test evaluates to <code>FALSE</code> you use the <code>else{}</code> element of this structure.</p>
<pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="dv">43</span>
<span class="cf">if</span> (age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span>) {
    <span class="kw">print</span>(<span class="st">&quot;Adult&quot;</span>)
} <span class="cf">else</span> {
    <span class="kw">print</span>(<span class="st">&quot;Junior&quot;</span>)
}</code></pre>
<pre><code>## [1] &quot;Adult&quot;</code></pre>
<p>Here the curly braces are required:</p>
<pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="dv">43</span>
<span class="cf">if</span> (age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span>) <span class="kw">print</span>(<span class="st">&quot;Adult&quot;</span>)
<span class="cf">else</span> <span class="kw">print</span>(<span class="st">&quot;Junior&quot;</span>)</code></pre>
<pre><code>## Error: &lt;text&gt;:3:1: unexpected &#39;else&#39;
## 2: if (age &gt;= 18) print(&quot;Adult&quot;)
## 3: else
##    ^</code></pre>
</div>
<div id="the-if-can-have-else-if-blocks" class="section level4 unnumbered">
<h4>The <code>if()</code> can have <code>else if()</code> blocks</h4>
<p>If there are more than two courses of action, you must reside to <code>else if()</code> blocks.
Each of them should have its own CONDition to test on.</p>
<pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="dv">43</span>
<span class="cf">if</span> (age <span class="op">&lt;</span><span class="st"> </span><span class="dv">18</span>) {
    <span class="kw">print</span>(<span class="st">&quot;Minor&quot;</span>)
} <span class="cf">else</span> <span class="cf">if</span> (age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">65</span>){
    <span class="kw">print</span>(<span class="st">&quot;Senior&quot;</span>)
} <span class="cf">else</span> <span class="cf">if</span>(age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span> <span class="op">&amp;&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span>){
    <span class="kw">print</span>(<span class="st">&quot;Young Adult&quot;</span>)
} <span class="cf">else</span> {
    <span class="kw">print</span>(<span class="st">&quot;Adult&quot;</span>)
}</code></pre>
<pre><code>## [1] &quot;Adult&quot;</code></pre>
</div>
<div id="ifelse-real-life-example" class="section level4 unnumbered">
<h4>if/else real life example</h4>
<p>This code chunk checks if a file exists and only downloads it if it is not present</p>
<pre class="sourceCode r"><code class="sourceCode r">my_data_file &lt;-<span class="st"> &quot;/some/file/on/disk&quot;</span>
<span class="co">## fetch file</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw">file.exists</span>(my_data_file)) {
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;downloading&quot;</span>, my_data_file))
    <span class="kw">download.file</span>(<span class="dt">url =</span> remote_url, <span class="dt">destfile =</span> my_data_file)
} <span class="cf">else</span> {
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;reading cached copy of&quot;</span>, my_data_file))
}</code></pre>
</div>
<div id="ifelse-shorthand" class="section level4 unnumbered">
<h4>ifelse shorthand</h4>
<p>There is also a shorthand for <code>if(){} else{}</code>. It is also called a <strong><em>ternary</em></strong>.<br />
It has the form<br />
<code>if (COND) &lt;EXPRESSION_FOR_TRUE&gt; else &lt;EXPRESSION_FOR_FALSE&gt;</code></p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">3</span>
x &lt;-<span class="st"> </span><span class="cf">if</span> (a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="st">&quot;EVEN&quot;</span> <span class="cf">else</span> <span class="st">&quot;UNEVEN&quot;</span>
x</code></pre>
<pre><code>## [1] &quot;UNEVEN&quot;</code></pre>
</div>
<div id="ifelse-on-dataframes-ifelse" class="section level4 unnumbered">
<h4>if/else on dataframes: <code>ifelse()</code></h4>
<p>When you want to assign values to a vector based on some condition, you need to use the third form, the <code>ifelse()</code> function.</p>
<p>When you use the regular if/else structures on dataframes you don’t get what you want:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Only first value (row) is evaluated and this value is cycled</span>
<span class="co"># The whole column gets value 1</span>
airquality<span class="op">$</span>foo &lt;-<span class="st"> </span><span class="cf">if</span> (airquality<span class="op">$</span>Ozone <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) <span class="dv">0</span> <span class="cf">else</span> <span class="dv">1</span> </code></pre>
<pre><code>## Warning in if (airquality$Ozone &lt; 30) 0 else 1: the condition has length &gt;
## 1 and only the first element will be used</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This works</span>
airquality<span class="op">$</span>bar &lt;-<span class="st"> </span><span class="kw">ifelse</span>(airquality<span class="op">$</span>Ozone <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="kw">head</span>(airquality)</code></pre>
<pre><code>##   Ozone Solar.R Wind Temp Month Day foo bar
## 1    41     190  7.4   67   May   1   1   1
## 2    36     118  8.0   72   May   2   1   1
## 3    12     149 12.6   74   May   3   1   0
## 4    18     313 11.5   62   May   4   1   0
## 5    NA      NA 14.3   56   May   5   1  NA
## 6    28      NA 14.9   66   May   6   1   0</code></pre>
</div>
</div>
<div id="iteration-with-for" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Iteration with <code>for(){}</code></h3>
<ul>
<li>Iteration with <code>for</code> is used for looping a series of values from a vector.
_ You should not use it to iterate columns or rows of a dataframe: the preferred way to do that is with <code>apply()</code> and its relatives (next presentation)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (greeting <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;&#39;Allo&quot;</span>, <span class="st">&quot;Moi&quot;</span>)) {
    <span class="kw">print</span>(greeting)
}</code></pre>
<pre><code>## [1] &quot;Hello&quot;
## [1] &quot;&#39;Allo&quot;
## [1] &quot;Moi&quot;</code></pre>
<p>Sometimes you need a counter or index when iterating:</p>
<pre class="sourceCode r"><code class="sourceCode r">greetings &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;&#39;Allo&quot;</span>, <span class="st">&quot;Moi&quot;</span>)
<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="kw">length</span>(greetings)) {
    <span class="kw">print</span>(<span class="kw">paste</span>(i, greetings[i]))
}</code></pre>
<pre><code>## [1] &quot;1 Hello&quot;
## [1] &quot;2 &#39;Allo&quot;
## [1] &quot;3 Moi&quot;</code></pre>
</div>
<div id="conditional-iteration-with-while" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Conditional iteration with <code>while(){}</code></h3>
<p>This is the last flow control structure. It is used to execute a block <strong><em>as long as a certain condition is met</em></strong>. They are not used very much in R.</p>
<pre class="sourceCode r"><code class="sourceCode r">counter =<span class="st"> </span><span class="dv">1</span>
<span class="cf">while</span> (counter <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) {
    <span class="kw">print</span>(counter)
    counter =<span class="st"> </span>counter <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
}</code></pre>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4</code></pre>
</div>
</div>
<div id="creating-functions" class="section level2">
<h2><span class="header-section-number">7.3</span> Creating functions</h2>
<p>Here is the definition again.</p>
<blockquote>
<p><em>A function is a piece of functionality that you can execute by typing its name, followed by a pair of parentheses. Within these parentheses, you can pass data for the function to work on. Functions often, but not always, return a value</em>.</p>
</blockquote>
<p>Thus, functions are named blocks of code with a <strong><em>single well-defined purpose</em></strong> which make them reusable.
You have already used many <strong><em>predefined</em></strong> or build in functions of R: <code>str</code>, <code>max</code>, <code>read.table</code> etc. If you type the name of a function without parenthesis you get its definition.</p>
<pre class="sourceCode r"><code class="sourceCode r">sum</code></pre>
<pre><code>## function (..., na.rm = FALSE)  .Primitive(&quot;sum&quot;)</code></pre>
<div id="anatomy-of-a-function" class="section level4 unnumbered">
<h4>Anatomy of a function</h4>
<p>A function</p>
<ul>
<li>usually, but not always, has a name. in the next chapter you will see examples of <em>anonymous</em> functions that are defined in the location where they are needed.<br />
</li>
<li>has a <strong><em>parameter list</em></strong> (sometimes of size zero) between parentheses. These parameters constitute the required input variables on which the function will operate.<br />
</li>
<li>has a <strong><em>method body</em></strong>. This is a block of one or more lines of code in which the actual work is performed.<br />
</li>
<li>may have a <strong><em>return value</em></strong>. Ther result of a function is usually, but not always returned. The print function, for instance, does not return a value but only outputs to the console. Functions can only retun one single value (vector). If more return values are needed, you need to wrap them in a complex datatype such as a list.<br />
</li>
<li>is defined using the _<strong>function keyword_</strong></li>
</ul>
<p>Here is a function prototype. It shows all characteristics of the above list of properties.</p>
<pre><code>method_name &lt;- function(arg, arg, ...) {
    &lt;function body&gt;
    return(return_value)
}</code></pre>
</div>
<div id="a-first-function" class="section level4 unnumbered">
<h4>A first function</h4>
<p>Here is a simple function determining whether some number is even</p>
<pre class="sourceCode r"><code class="sourceCode r">is_even &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    evens &lt;-<span class="st"> </span>x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>
    <span class="kw">return</span>(evens) 
}
<span class="kw">is_even</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<p>Note that <code>return()</code> is a <strong><em>method call</em></strong> which is very unlike other programming languages.</p>
<p>The <strong><em>return statement is optional</em></strong>.
In R, the last statement of a method body is its <strong><em>implicit return value</em></strong>. Therefore, the previous example is equivalent to this:</p>
<pre class="sourceCode r"><code class="sourceCode r">is_even &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>
}
<span class="kw">is_even</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<p>Being explicit is always allowed when implicit return is possible, but using a <code>return()</code> for forcing return values at other points is required:</p>
<pre class="sourceCode r"><code class="sourceCode r">my_message &lt;-<span class="st"> </span><span class="cf">function</span>(age) {
    <span class="cf">if</span> (age <span class="op">&lt;</span><span class="st"> </span><span class="dv">18</span>) <span class="kw">return</span>(<span class="st">&quot;have a lemonade!&quot;</span>) <span class="co"># explicit return</span>
    <span class="st">&quot;have a beer!&quot;</span> <span class="co"># implicit return statement</span>
}
<span class="kw">my_message</span>(<span class="dv">20</span>)</code></pre>
<pre><code>## [1] &quot;have a beer!&quot;</code></pre>
</div>
<div id="default-argument-values" class="section level4 unnumbered">
<h4>Default argument values</h4>
<p>It is possible to specify <strong><em>default values</em></strong> for function arguments. This is a value that is attached to a function parameter when the calling code does not provide one. A default value is specified in the parameter list, using this construct: <code>some_arg = &lt;default-value&gt;</code>. Almost all functions in R have (many) parameters with default values.</p>
<p>You should use default values yourself for function parameters whenever possible. They make using the function so much easier. The following function calculates the exponent (power) of a number. When no <code>power =</code> value is provided, it defaults to two.</p>
<pre class="sourceCode r"><code class="sourceCode r">my_power &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">power =</span> <span class="dv">2</span>) {
    x <span class="op">^</span><span class="st"> </span>power
}
<span class="kw">my_power</span>(<span class="dv">10</span>, <span class="dv">3</span>) <span class="co">## custom power</span></code></pre>
<pre><code>## [1] 1000</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">my_power</span>(<span class="dv">10</span>) <span class="co">## defaults to 2</span></code></pre>
<pre><code>## [1] 100</code></pre>
</div>
<div id="argument-order-when-calling-a-function" class="section level4 unnumbered">
<h4>Argument order when calling a function</h4>
<p>As we have seen many times before, you do not <em>need</em> to pass arguments by name. In the above example, the names were not used. When you do not use the names of arguments, the order in which you pass them is important; they must match the order in which they are declared in the function. If you use their names, their order is not important:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">my_power</span>(<span class="dt">power =</span> <span class="dv">4</span>, <span class="dt">x =</span> <span class="dv">2</span>)</code></pre>
<pre><code>## [1] 16</code></pre>
<p>To summarize: When calling a function,</p>
<ul>
<li>the parameters without default value are mandatory</li>
<li>the unnamed arguments should come first and should be passed in the order in which they are declared</li>
<li>passing named arguments may be done in any order</li>
</ul>
</div>
<div id="errors-and-warnings" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Errors and warnings</h3>
<p>When someting is not right, but not enought to quit execution, use a warning to let the user (or yourself) know that there is something wrong:</p>
<p><code>warning(&quot;I am not happy&quot;)</code></p>
<p>When something is terribly wrong, and you cannot continue, you should stop execution with an error message:</p>
<p><code>stop(&quot;I can't go on&quot;)</code></p>
<p>Here is a small errors demo:</p>
<pre class="sourceCode r"><code class="sourceCode r">demo_inverse &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.numeric</span>(x)) {
        <span class="kw">stop</span>(<span class="st">&quot;non-numeric vector&quot;</span>)
    }
    <span class="kw">return</span>(x <span class="op">/</span><span class="st"> </span><span class="dv">3</span>)
}
result1 &lt;-<span class="st"> </span><span class="kw">demo_inverse</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)) <span class="co">#result1 not created!</span></code></pre>
<pre><code>## Error in demo_inverse(c(&quot;a&quot;, &quot;b&quot;)): non-numeric vector</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">result2 &lt;-<span class="st"> </span><span class="kw">demo_inverse</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</code></pre>
</div>
</div>
<div id="scripting-1" class="section level2">
<h2><span class="header-section-number">7.4</span> Scripting</h2>
<p>An R script is a text file with the extension <code>.R</code> that contains R code. When it is loaded, it is immediately evaluated. <strong><em>Functions are loaded/evaluated, but not executed</em></strong>. Declared variables are stored in main memory - the Global Environment to be precise.</p>
<p>Here is the contents of a very simple R script called <code>source_demo.R</code></p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">42</span>
x <span class="co"># echo to console</span>
<span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;x = &quot;</span>, x)) <span class="co">#explicit print</span>

<span class="co"># function defined but not called</span>
demo_function &lt;-<span class="st"> </span><span class="cf">function</span>(message) {
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;you said&quot;</span>, message))
}</code></pre>
<p>You can load this script int your R session by <em>sourcing</em> it; just call <code>source(path/to/source_demo.R)</code>. Alternatively, when you have it open in the RStudio editor, you can click the “source” button at the top right of the editor panel. After that, you can use the functions and variables defined within the script:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&quot;data/source_demo.R&quot;</span>)</code></pre>
<pre><code>## [1] &quot;x = 42&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x</code></pre>
<pre><code>## [1] 42</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">demo_function</span>(<span class="st">&quot;hi!&quot;</span>)</code></pre>
<pre><code>## [1] &quot;you said hi!&quot;</code></pre>
<div id="why-scripts" class="section level4 unnumbered">
<h4>Why scripts?</h4>
<ul>
<li>To store pieces of functionality you want to reuse (e.g. in different RMarkdown documents)</li>
<li>To store entire workflows outside RMarkdown</li>
<li>To run R code from the commandline (terminal)</li>
<li>To call from other scripts and build <strong><em>applications</em></strong> or <strong><em>packages</em></strong></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataframe-manipulations-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["davur_ebook.pdf", "davur_ebook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
